syntax = "proto3";

package proto.scg.tenant.v1;

import "google/protobuf/timestamp.proto";
import "proto/scg/common/v1/common.proto";
import "proto/scg/shared/v1/events.proto";

option go_package = "github.com/next-trace/scg-contracts/gen/go/proto/scg/tenant/v1;tenantv1";

// Canonical tenant lifecycle events. Additive-only contract.

message TenantCreated {
  // Envelope-like common fields
  string event_id = 1 [json_name = "event_id", deprecated = true];                 // UUID v7
  google.protobuf.Timestamp occurred_at = 2 [json_name = "occurred_at", deprecated = true];
  string correlation_id = 3 [json_name = "correlation_id", deprecated = true];     // optional UUID
  string causation_id = 4 [json_name = "causation_id", deprecated = true];         // optional UUID
  string source_service = 5 [json_name = "source_service", deprecated = true];
  string actor_sub = 6 [json_name = "actor_sub", deprecated = true];               // OIDC sub or "system"
  map<string,string> attributes = 7 [json_name = "attributes", deprecated = true];

  // Entity keys and primary fields
  string tenant_uuid = 8 [json_name = "tenant_uuid"];       // UUID
  string tenant_key = 9 [json_name = "tenant_key"];         // optional stable key
  string name = 10 [json_name = "name"];
  string status = 11 [json_name = "status"];

  // Transitional common envelope (deprecated in favor of meta)
  proto.scg.common.v1.EventMeta meta_common = 12 [json_name = "meta_common", deprecated = true];
  // Standard envelope going forward
  proto.scg.shared.v1.EventEnvelope meta = 13 [json_name = "meta"];
}

message TenantActivated {
  string event_id = 1 [json_name = "event_id", deprecated = true];
  google.protobuf.Timestamp occurred_at = 2 [json_name = "occurred_at", deprecated = true];
  string correlation_id = 3 [json_name = "correlation_id", deprecated = true];
  string causation_id = 4 [json_name = "causation_id", deprecated = true];
  string source_service = 5 [json_name = "source_service", deprecated = true];
  string actor_sub = 6 [json_name = "actor_sub", deprecated = true];
  map<string,string> attributes = 7 [json_name = "attributes", deprecated = true];

  string tenant_uuid = 8 [json_name = "tenant_uuid"];
  string status = 9 [json_name = "status"];
  string reason = 10 [json_name = "reason"];

  // Transitional common envelope (deprecated in favor of meta)
  proto.scg.common.v1.EventMeta meta_common = 11 [json_name = "meta_common", deprecated = true];
  // Standard envelope going forward
  proto.scg.shared.v1.EventEnvelope meta = 12 [json_name = "meta"];
}

message TenantDeactivated {
  string event_id = 1 [json_name = "event_id", deprecated = true];
  google.protobuf.Timestamp occurred_at = 2 [json_name = "occurred_at", deprecated = true];
  string correlation_id = 3 [json_name = "correlation_id", deprecated = true];
  string causation_id = 4 [json_name = "causation_id", deprecated = true];
  string source_service = 5 [json_name = "source_service", deprecated = true];
  string actor_sub = 6 [json_name = "actor_sub", deprecated = true];
  map<string,string> attributes = 7 [json_name = "attributes", deprecated = true];

  string tenant_uuid = 8 [json_name = "tenant_uuid"];
  string status = 9 [json_name = "status"];
  string reason = 10 [json_name = "reason"];

  // Transitional common envelope (deprecated in favor of meta)
  proto.scg.common.v1.EventMeta meta_common = 11 [json_name = "meta_common", deprecated = true];
  // Standard envelope going forward
  proto.scg.shared.v1.EventEnvelope meta = 12 [json_name = "meta"];
}

message TenantSoftDeleted {
  string event_id = 1 [json_name = "event_id", deprecated = true];
  google.protobuf.Timestamp occurred_at = 2 [json_name = "occurred_at", deprecated = true];
  string correlation_id = 3 [json_name = "correlation_id", deprecated = true];
  string causation_id = 4 [json_name = "causation_id", deprecated = true];
  string source_service = 5 [json_name = "source_service", deprecated = true];
  string actor_sub = 6 [json_name = "actor_sub", deprecated = true];
  map<string,string> attributes = 7 [json_name = "attributes", deprecated = true];

  string tenant_uuid = 8 [json_name = "tenant_uuid"];
  string reason = 9 [json_name = "reason"];

  // Transitional common envelope (deprecated in favor of meta)
  proto.scg.common.v1.EventMeta meta_common = 10 [json_name = "meta_common", deprecated = true];
  // Standard envelope going forward
  proto.scg.shared.v1.EventEnvelope meta = 11 [json_name = "meta"];
}

message TenantHardDeleted {
  string event_id = 1 [json_name = "event_id", deprecated = true];
  google.protobuf.Timestamp occurred_at = 2 [json_name = "occurred_at", deprecated = true];
  string correlation_id = 3 [json_name = "correlation_id", deprecated = true];
  string causation_id = 4 [json_name = "causation_id", deprecated = true];
  string source_service = 5 [json_name = "source_service", deprecated = true];
  string actor_sub = 6 [json_name = "actor_sub", deprecated = true];
  map<string,string> attributes = 7 [json_name = "attributes", deprecated = true];

  string tenant_uuid = 8 [json_name = "tenant_uuid"];
  string reason = 9 [json_name = "reason"];

  // Transitional common envelope (deprecated in favor of meta)
  proto.scg.common.v1.EventMeta meta_common = 10 [json_name = "meta_common", deprecated = true];
  // Standard envelope going forward
  proto.scg.shared.v1.EventEnvelope meta = 11 [json_name = "meta"];
}

message TenantRestored {
  string event_id = 1 [json_name = "event_id", deprecated = true];
  google.protobuf.Timestamp occurred_at = 2 [json_name = "occurred_at", deprecated = true];
  string correlation_id = 3 [json_name = "correlation_id", deprecated = true];
  string causation_id = 4 [json_name = "causation_id", deprecated = true];
  string source_service = 5 [json_name = "source_service", deprecated = true];
  string actor_sub = 6 [json_name = "actor_sub", deprecated = true];
  map<string,string> attributes = 7 [json_name = "attributes", deprecated = true];

  string tenant_uuid = 8 [json_name = "tenant_uuid"];
  string status = 9 [json_name = "status"];

  // Transitional common envelope (deprecated in favor of meta)
  proto.scg.common.v1.EventMeta meta_common = 10 [json_name = "meta_common", deprecated = true];
  // Standard envelope going forward
  proto.scg.shared.v1.EventEnvelope meta = 11 [json_name = "meta"];
}

message TenantUpdated {
  string event_id = 1 [json_name = "event_id", deprecated = true];
  google.protobuf.Timestamp occurred_at = 2 [json_name = "occurred_at", deprecated = true];
  string correlation_id = 3 [json_name = "correlation_id", deprecated = true];
  string causation_id = 4 [json_name = "causation_id", deprecated = true];
  string source_service = 5 [json_name = "source_service", deprecated = true];
  string actor_sub = 6 [json_name = "actor_sub", deprecated = true];
  map<string,string> attributes = 7 [json_name = "attributes", deprecated = true];

  string tenant_uuid = 8 [json_name = "tenant_uuid"];
  map<string,string> updated_fields = 9 [json_name = "updated_fields"];

  // Transitional common envelope (deprecated in favor of meta)
  proto.scg.common.v1.EventMeta meta_common = 10 [json_name = "meta_common", deprecated = true];
  // Standard envelope going forward
  proto.scg.shared.v1.EventEnvelope meta = 11 [json_name = "meta"];
}